{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"50839747-8e280c8a680bf22042cf2c364\"\n\nexport async function getImagesByQuery(query, page = 1) {\n    const params = {\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page,\n    per_page: 15\n}\n    const { data } = await axios.get(\"https://pixabay.com/api/\", {params});\n    return data;\n}\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst loader = document.querySelector(\".loader\")\nconst loadMore = document.querySelector(\".load-more\");\nconst list = document.querySelector(\".gallery\")\n\nlet lightbox = null;\n\nexport function createGallery(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `\n        <li class=\"photo-card\">\n            <a href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" width=\"300\" alt=\"${tags}\">\n                <ul>\n                    <li>\n                        <h2>Likes</h2>\n                        <p>${likes}</p>\n                    </li>\n                    <li>\n                        <h2>Views</h2>\n                        <p>${views}</p>\n                    </li>\n                    <li>\n                        <h2>Comments</h2>\n                        <p>${comments}</p>\n                    </li>\n                    <li>\n                        <h2>Downloads</h2>\n                        <p>${downloads}</p>\n                    </li>\n                </ul>\n            </a>\n        </li>\n    `).join(\"\")\n\n    list.insertAdjacentHTML(\"beforeend\", markup);\n    refreshLightbox();\n}\n\nexport function clearGallery(galleryElement) {\n  galleryElement.innerHTML = '';\n}\n\nfunction refreshLightbox() {\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\")\n}\n\nexport function showLoadMoreButton() {\n    loadMore.classList.remove(\"load-more-hidden\")\n}\n\nexport function hideLoadMoreButton() {\n    loadMore.classList.add(\"load-more-hidden\")\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\"\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\")\nconst input = document.querySelector('[name=\"search-text\"]')\nconst list = document.querySelector(\".gallery\")\nconst loadMore = document.querySelector(\".load-more\");\n\nlet page;\nconst perPage = 15; \n\nform.addEventListener(\"submit\", handleSubmit)\n\nasync function handleSubmit(event) {\n    event.preventDefault()\n    const query = input.value.trim();\n    page = 1;\n    hideLoadMoreButton();\n\n    if (query === \"\") {\n        iziToast.warning({\n        title: \"Warning\",\n        message: 'Please enter your query',\n        position: 'topCenter',\n        });\n        return;\n    }\n\n    clearGallery(list);\n\n    showLoader()\n    try {\n        const data = await getImagesByQuery(query, page);\n        console.log(data);\n        const totalPages = Math.ceil(data.totalHits / perPage)\n\n\n        if (data.hits.length > 0) {\n            createGallery(data.hits);\n            if (page < totalPages) {\n                showLoadMoreButton();\n        } else {\n            iziToast.warning({\n                title: 'Caution',\n                message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        hideLoadMoreButton();\n        }\n        } else if (data.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            hideLoadMoreButton();\n        }\n    }\n    \n    catch(error) {\n        iziToast.error({\n                message: 'Oops, something went wrong',\n            });\n    } finally {\n        hideLoader();\n    }\n}\n\nloadMore.addEventListener(\"click\", handleclick)\n\nasync function handleclick() {\n    page += 1;\n    loadMore.disabled = true;\n    \n    try {\n        const data = await getImagesByQuery(input.value.trim(), page);\n        loadMore.disabled = false;\n        createGallery(data.hits);\n\n        const card = document.querySelector(\".photo-card\");\n        const cardHeight = card.getBoundingClientRect().height;\n\n            window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: \"smooth\"\n        })\n        const totalPages = Math.ceil(data.totalHits / perPage)\n        \n        if (page >= totalPages) {\n                hideLoadMoreButton();\n                iziToast.warning({\n                title: 'Caution',\n                message: \"We're sorry, but you've reached the end of search results.\",\n        });\n            }\n    } catch (error) {\n        iziToast.error({\n                message: 'Oops, something went wrong',\n            });\n    }\n}"],"names":["API_KEY","getImagesByQuery","query","page","params","data","axios","loader","loadMore","list","lightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refreshLightbox","clearGallery","galleryElement","SimpleLightbox","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","perPage","handleSubmit","event","iziToast","totalPages","handleclick","cardHeight"],"mappings":"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"}