{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"50839747-8e280c8a680bf22042cf2c364\"\n\nexport async function getImagesByQuery(query, page = 1) {\n    const params = {\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page,\n    per_page: 15\n}\n    const { data } = await axios.get(\"https://pixabay.com/api/\", {params});\n    return data;\n}\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst loader = document.querySelector(\".loader\")\nconst loadMore = document.querySelector(\".load-more\");\n\nlet lightbox = null;\n\nexport function createGallery(images) {\n    return images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `\n        <li class=\"photo-card\">\n            <a href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" width=\"300\" alt=\"${tags}\">\n                <ul>\n                    <li>\n                        <h2>Likes</h2>\n                        <p>${likes}</p>\n                    </li>\n                    <li>\n                        <h2>Views</h2>\n                        <p>${views}</p>\n                    </li>\n                    <li>\n                        <h2>Comments</h2>\n                        <p>${comments}</p>\n                    </li>\n                    <li>\n                        <h2>Downloads</h2>\n                        <p>${downloads}</p>\n                    </li>\n                </ul>\n            </a>\n        </li>\n    `).join(\"\")\n}\n\nexport function clearGallery(galleryElement) {\n  galleryElement.innerHTML = '';\n}\n\nexport function refreshLightbox() {\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\")\n}\n\nexport function showLoadMoreButton() {\n    loadMore.classList.remove(\"load-more-hidden\")\n}\n\nexport function hideLoadMoreButton() {\n    loadMore.classList.add(\"load-more-hidden\")\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\"\nimport { createGallery, clearGallery, refreshLightbox, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\")\nconst input = document.querySelector('[name=\"search-text\"]')\nconst list = document.querySelector(\".gallery\")\nconst loadMore = document.querySelector(\".load-more\");\n\nlet page = 1;\nconst perPage = 15; \n\nform.addEventListener(\"submit\", handleSubmit)\n\nfunction handleSubmit(event) {\n    event.preventDefault()\n    const query = input.value.trim();\n    page = 1;\n\n    if (query === \"\") {\n        iziToast.warning({\n        title: \"Warning\",\n        message: 'Please enter your query',\n        position: 'topCenter',\n        });\n        return;\n    }\n\n    clearGallery(list);\n\n    showLoader()\n\n    getImagesByQuery(query, page).then(data => {\n\n        if (data.hits.length > 0) {\n\n            list.innerHTML = createGallery(data.hits)\n            refreshLightbox();\n            showLoadMoreButton();\n        } else {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n        }\n\n        if (perPage >= data.totalHits) {\n            iziToast.warning({\n                title: 'Caution',\n                message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        hideLoadMoreButton()\n        }\n    })\n    .catch(() => {\n        iziToast.error({\n                message: 'Oops, something went wrong',\n            });\n    })\n    .finally(() => {\n        hideLoader();\n    })\n}\n\nrefreshLightbox();\n\nloadMore.addEventListener(\"click\", handleclick)\n\nasync function handleclick() {\n    page += 1;\n    loadMore.disabled = true;\n    \n    try {\n        const data = await getImagesByQuery(input.value.trim(), page);\n        console.log(data);\n        loadMore.disabled = false;\n        list.insertAdjacentHTML(\"beforeend\", createGallery(data.hits))\n        refreshLightbox();\n\n        const card = document.querySelector(\".photo-card\");\n        const cardHeight = card.getBoundingClientRect().height;\n\n            window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: \"smooth\"\n        })\n        const currentVolume = page * perPage;\n            console.log(currentVolume)\n        \n        if (currentVolume >= data.totalHits) {\n                hideLoadMoreButton();\n                iziToast.warning({\n                title: 'Caution',\n                message: \"We're sorry, but you've reached the end of search results.\",\n        });\n            }\n    } catch (error) {\n        iziToast.error({\n                message: 'Oops, something went wrong',\n            });\n    }\n}"],"names":["API_KEY","getImagesByQuery","query","page","params","data","axios","loader","loadMore","lightbox","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","galleryElement","refreshLightbox","SimpleLightbox","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","list","perPage","handleSubmit","event","iziToast","handleclick","cardHeight","currentVolume"],"mappings":"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"}